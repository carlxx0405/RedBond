<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RedBond - Hospital Dashboard</title>
  <link rel="icon" href="/assets/icon.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="//unpkg.com/navigo"></script>
  <script src="https://kit.fontawesome.com/244af82459.js" crossorigin="anonymous"></script>
  <script type="module" src="../config.js"></script>
</head>
<body class="bg-gray-50">

  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-60 bg-white shadow-md p-4 space-y-6">
      <div class="text-xl font-bold text-red-600">RedBond <i class="fas fa-tint"></i></div>
      <nav class="flex flex-col space-y-3">
        <a href="#/" data-navigo class="nav-link text-gray-700 hover:text-red-600 flex items-center space-x-2">
          <i class="fas fa-home"></i><span>Dashboard</span>
        </a>
        <a href="#/requests" data-navigo class="nav-link text-gray-700 hover:text-red-600 flex items-center space-x-2">
          <i class="fas fa-tint"></i><span>Blood Requests</span>
        </a>
        <a href="#/availability" data-navigo class="nav-link text-gray-700 hover:text-red-600 flex items-center space-x-2">
          <i class="fas fa-sync-alt"></i><span>Update Availability</span>
        </a>
        <a href="/logout" data-navigo class="nav-link text-gray-700 hover:text-red-600 flex items-center space-x-2">
            <i class="fas fa-power-off"></i><span>Log-out</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main id="main-content" class="flex-1 p-6">
      <!-- JS will inject views here -->
    </main>
  </div>

<!-- Supabase Script -->
<script type="module">

  // Function to fetch hospital data
  async function fetchHospitalData() {
    try {
      const { data, error } = await supabase
        .from('hospital_users')
        .select('*')
        .eq('email', localStorage.getItem('hospitalEmail'));  // Assuming email is stored in localStorage after login

      if (error) {
        console.error('Error fetching data:', error);
      } else {
        console.log('Hospital data:', data);
        // You can now inject this data into your dashboard
      }
    } catch (err) {
      console.error('Error:', err);
    }
  }

  // Call the fetchHospitalData function when the page is loaded
  window.onload = fetchHospitalData;
</script>

<script src="../hospital/hospitalDashboard.html" defer></script>
</body>
</html>
